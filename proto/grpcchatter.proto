syntax = "proto3";

package proto;

option go_package = "/proto";

message CreateChatRoomRequest {
    string room_name = 1;
    string room_password = 2;
}

message CreateChatRoomResponse {
    string short_code = 1;
}

message JoinChatRoomRequest {
    string user_name = 1;
    string short_code = 2;
    string room_password = 3;
}

message JoinChatRoomResponse {
    string token = 1;
}

message User {
    string user_name = 1;
}

message ListChatRoomUsersRequest {
    string short_code = 1;
}

message ListChatRoomUsersResponse {
    repeated User users = 1;
}

message ClientMessage {
    string body = 1;
}

message ServerMessage {
    string user_name = 1;
    string body = 2;
}

service GRPCChatter {
    rpc CreateChatRoom(CreateChatRoomRequest) returns (CreateChatRoomResponse) {};
    rpc JoinChatRoom(JoinChatRoomRequest) returns (JoinChatRoomResponse) {};
    rpc ListChatRoomUsers(ListChatRoomUsersRequest) returns (ListChatRoomUsersResponse) {};
    rpc Chat(stream ClientMessage) returns (stream ServerMessage) {};
}
